---
description: Guidelines for applying Nielsen's Heuristics to improve user experience with loading states, feedback, and error handling
globs: src/**/*.{ts,tsx}
alwaysApply: true
---

# Nielsen's Heuristics - UX Guidelines

## **Vis√£o Geral**

Aplicar as 10 Heur√≠sticas de Nielsen para melhorar a experi√™ncia do usu√°rio, com foco especial em feedback visual, estados de carregamento e comunica√ß√£o de erros.

## **Heur√≠sticas Principais**

### **1. Visibilidade do Status do Sistema** ‚ö°

O sistema deve sempre informar ao usu√°rio o que est√° acontecendo atrav√©s de feedback apropriado e em tempo razo√°vel.

#### **‚úÖ DO: Estados de Carregamento Claros**

```typescript
// ‚úÖ DO: Skeleton loading para listas
export function MaterialsList() {
  const { materials, isLoading } = useMaterialsStore();
  
  if (isLoading) {
    return (
      <div className="space-y-4">
        {Array.from({ length: 3 }).map((_, i) => (
          <MaterialCardSkeleton key={i} />
        ))}
      </div>
    );
  }
  
  return (
    <div className="space-y-4">
      {materials.map(material => (
        <MaterialCard key={material.id} material={material} />
      ))}
    </div>
  );
}

// ‚úÖ DO: Loading states espec√≠ficos
export function MaterialCardSkeleton() {
  return (
    <div className="animate-pulse rounded-lg border p-4">
      <div className="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
      <div className="h-3 bg-gray-200 rounded w-1/2 mb-4"></div>
      <div className="h-8 bg-gray-200 rounded"></div>
    </div>
  );
}
```

#### **‚ùå DON'T: Carregamento sem Feedback**

```typescript
// ‚ùå DON'T: Sem indica√ß√£o de carregamento
export function MaterialsList() {
  const { materials, isLoading } = useMaterialsStore();
  
  // Usu√°rio n√£o sabe se est√° carregando ou se n√£o h√° dados
  return (
    <div>
      {materials.map(material => (
        <MaterialCard key={material.id} material={material} />
      ))}
    </div>
  );
}
```

### **2. Correspond√™ncia entre Sistema e Mundo Real** üåç

O sistema deve falar a linguagem do usu√°rio, com palavras, frases e conceitos familiares.

#### **‚úÖ DO: Linguagem Natural e Familiar**

```typescript
// ‚úÖ DO: Mensagens claras e familiares
export function EmptyMaterialsState() {
  return (
    <div className="text-center py-12">
      <div className="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
        <RecycleIcon className="w-12 h-12 text-gray-400" />
      </div>
      <h3 className="text-lg font-medium text-gray-900 mb-2">
        Nenhum material encontrado
      </h3>
      <p className="text-gray-500 mb-4">
        Que tal come√ßar adicionando seu primeiro material para reciclagem?
      </p>
      <Button>Adicionar Material</Button>
    </div>
  );
}
```

### **3. Controle e Liberdade do Usu√°rio** üéõÔ∏è

Usu√°rios frequentemente escolhem fun√ß√µes do sistema por engano e precisam de uma "sa√≠da de emerg√™ncia" claramente marcada.

#### **‚úÖ DO: A√ß√µes Revers√≠veis e Cancelamento**

```typescript
// ‚úÖ DO: Confirma√ß√£o para a√ß√µes destrutivas
export function DeleteMaterialDialog({ materialId, onClose }: Props) {
  const [isDeleting, setIsDeleting] = useState(false);
  
  const handleDelete = async () => {
    setIsDeleting(true);
    try {
      await deleteMaterial(materialId);
      toast.success("Material removido com sucesso!");
      onClose();
    } catch (error) {
      toast.error("Erro ao remover material");
    } finally {
      setIsDeleting(false);
    }
  };
  
  return (
    <Dialog>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Confirmar Remo√ß√£o</DialogTitle>
          <DialogDescription>
            Tem certeza que deseja remover este material? Esta a√ß√£o n√£o pode ser desfeita.
          </DialogDescription>
        </DialogHeader>
        <DialogFooter>
          <Button variant="outline" onClick={onClose}>
            Cancelar
          </Button>
          <Button 
            variant="destructive" 
            onClick={handleDelete}
            disabled={isDeleting}
          >
            {isDeleting ? "Removendo..." : "Remover"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  );
}
```

### **4. Consist√™ncia e Padr√µes** üîÑ

Usu√°rios n√£o devem ter que se perguntar se palavras, situa√ß√µes ou a√ß√µes diferentes significam a mesma coisa.

#### **‚úÖ DO: Padr√µes Consistentes**

```typescript
// ‚úÖ DO: Componentes de estado consistentes
export function LoadingState({ message = "Carregando..." }: { message?: string }) {
  return (
    <div className="flex items-center justify-center py-8">
      <div className="flex items-center space-x-2">
        <div className="animate-spin rounded-full h-5 w-5 border-2 border-green-500 border-t-transparent"></div>
        <span className="text-gray-600">{message}</span>
      </div>
    </div>
  );
}

export function ErrorState({ 
  message = "Algo deu errado", 
  onRetry 
}: { 
  message?: string; 
  onRetry?: () => void; 
}) {
  return (
    <div className="text-center py-8">
      <div className="mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4">
        <AlertCircleIcon className="w-8 h-8 text-red-500" />
      </div>
      <h3 className="text-lg font-medium text-gray-900 mb-2">Ops!</h3>
      <p className="text-gray-500 mb-4">{message}</p>
      {onRetry && (
        <Button onClick={onRetry} variant="outline">
          Tentar Novamente
        </Button>
      )}
    </div>
  );
}
```

### **5. Preven√ß√£o de Erros** üõ°Ô∏è

Melhor que boas mensagens de erro √© um design cuidadoso que previne a ocorr√™ncia de problemas.

#### **‚úÖ DO: Valida√ß√£o em Tempo Real**

```typescript
// ‚úÖ DO: Valida√ß√£o com feedback imediato
export function MaterialForm() {
  const [formData, setFormData] = useState({ name: "", weight: "" });
  const [errors, setErrors] = useState<Record<string, string>>({});
  
  const validateField = (field: string, value: string) => {
    const newErrors = { ...errors };
    
    if (field === "name" && value.length < 2) {
      newErrors.name = "Nome deve ter pelo menos 2 caracteres";
    } else if (field === "weight" && isNaN(Number(value))) {
      newErrors.weight = "Peso deve ser um n√∫mero v√°lido";
    } else {
      delete newErrors[field];
    }
    
    setErrors(newErrors);
  };
  
  return (
    <form>
      <div>
        <Label htmlFor="name">Nome do Material</Label>
        <Input
          id="name"
          value={formData.name}
          onChange={(e) => {
            setFormData(prev => ({ ...prev, name: e.target.value }));
            validateField("name", e.target.value);
          }}
          className={errors.name ? "border-red-500" : ""}
        />
        {errors.name && (
          <p className="text-sm text-red-500 mt-1">{errors.name}</p>
        )}
      </div>
    </form>
  );
}
```

### **6. Reconhecimento em vez de Lembran√ßa** üß†

Minimize a carga de mem√≥ria do usu√°rio tornando objetos, a√ß√µes e op√ß√µes vis√≠veis.

#### **‚úÖ DO: Informa√ß√µes Visuais Claras**

```typescript
// ‚úÖ DO: Status visual claro
export function MaterialCard({ material }: { material: Material }) {
  const getStatusColor = (status: MaterialStatus) => {
    switch (status) {
      case "ACTIVE": return "bg-green-100 text-green-800";
      case "RESERVED": return "bg-yellow-100 text-yellow-800";
      case "SOLD": return "bg-blue-100 text-blue-800";
      default: return "bg-gray-100 text-gray-800";
    }
  };
  
  return (
    <Card className="relative">
      <CardHeader>
        <div className="flex items-center justify-between">
          <CardTitle>{material.name}</CardTitle>
          <Badge className={getStatusColor(material.status)}>
            {material.status}
          </Badge>
        </div>
        <CardDescription>
          {material.description}
        </CardDescription>
      </CardHeader>
      <CardContent>
        <div className="flex items-center space-x-4 text-sm text-gray-600">
          <span>üí∞ R$ {material.price}</span>
          <span>‚öñÔ∏è {material.weight}kg</span>
          <span>üìç {material.location}</span>
        </div>
      </CardContent>
    </Card>
  );
}
```

### **7. Flexibilidade e Efici√™ncia de Uso** ‚ö°

Aceleradores podem acelerar a intera√ß√£o para o usu√°rio experiente, mas o sistema deve ser √∫til para usu√°rios inexperientes e experientes.

#### **‚úÖ DO: Atalhos e A√ß√µes R√°pidas**

```typescript
// ‚úÖ DO: Atalhos de teclado e a√ß√µes r√°pidas
export function MaterialActions({ materialId }: { materialId: string }) {
  const handleQuickReserve = () => {
    // A√ß√£o r√°pida sem confirma√ß√£o para usu√°rios experientes
    toast.success("Material reservado!");
  };
  
  return (
    <div className="flex space-x-2">
      <Button size="sm" onClick={handleQuickReserve}>
        Reservar
      </Button>
      <Button size="sm" variant="outline">
        Ver Detalhes
      </Button>
    </div>
  );
}
```

### **8. Est√©tica e Design Minimalista** üé®

Di√°logos n√£o devem conter informa√ß√µes irrelevantes ou raramente necess√°rias.

#### **‚úÖ DO: Interface Limpa e Focada**

```typescript
// ‚úÖ DO: Interface minimalista
export function MaterialList() {
  const { materials, filters, setFilters } = useMaterialsStore();
  
  return (
    <div className="space-y-4">
      {/* Filtros essenciais apenas */}
      <div className="flex space-x-2">
        <Select value={filters.type} onValueChange={(value) => setFilters({ type: value })}>
          <SelectTrigger className="w-48">
            <SelectValue placeholder="Tipo de Material" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">Todos</SelectItem>
            <SelectItem value="plastic">Pl√°stico</SelectItem>
            <SelectItem value="paper">Papel</SelectItem>
          </SelectContent>
        </Select>
      </div>
      
      {/* Lista focada no essencial */}
      <div className="grid gap-4">
        {materials.map(material => (
          <MaterialCard key={material.id} material={material} />
        ))}
      </div>
    </div>
  );
}
```

### **9. Ajudar Usu√°rios a Reconhecer, Diagnosticar e Recuperar de Erros** üîß

Mensagens de erro devem ser expressas em linguagem simples, indicar precisamente o problema e sugerir uma solu√ß√£o.

#### **‚úÖ DO: Mensagens de Erro √öteis**

```typescript
// ‚úÖ DO: Toast com mensagens claras
export function useErrorHandler() {
  const showError = (error: Error) => {
    let message = "Algo deu errado";
    
    if (error.message.includes("network")) {
      message = "Verifique sua conex√£o com a internet";
    } else if (error.message.includes("unauthorized")) {
      message = "Sua sess√£o expirou. Fa√ßa login novamente";
    } else if (error.message.includes("validation")) {
      message = "Verifique os dados informados";
    }
    
    toast.error(message, {
      description: "Tente novamente em alguns instantes",
      action: {
        label: "Tentar Novamente",
        onClick: () => window.location.reload()
      }
    });
  };
  
  return { showError };
}
```

### **10. Ajuda e Documenta√ß√£o** üìö

Mesmo que seja melhor se o sistema puder ser usado sem documenta√ß√£o, pode ser necess√°rio fornecer ajuda e documenta√ß√£o.

#### **‚úÖ DO: Tooltips e Ajuda Contextual**

```typescript
// ‚úÖ DO: Ajuda contextual
export function EcoPointsDisplay({ points }: { points: number }) {
  return (
    <TooltipProvider>
      <Tooltip>
        <TooltipTrigger asChild>
          <div className="flex items-center space-x-2 cursor-help">
            <LeafIcon className="w-5 h-5 text-green-500" />
            <span className="font-semibold">{points} EcoPoints</span>
            <HelpCircleIcon className="w-4 h-4 text-gray-400" />
          </div>
        </TooltipTrigger>
        <TooltipContent>
          <p>EcoPoints s√£o pontos que voc√™ ganha por a√ß√µes sustent√°veis</p>
        </TooltipContent>
      </Tooltip>
    </TooltipProvider>
  );
}
```

## **Componentes de Estado Padr√£o**

### **Skeleton Components**

```typescript
// ‚úÖ DO: Skeletons espec√≠ficos para cada tipo de conte√∫do
export function MaterialCardSkeleton() {
  return (
    <div className="animate-pulse rounded-lg border p-4">
      <div className="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
      <div className="h-3 bg-gray-200 rounded w-1/2 mb-4"></div>
      <div className="h-8 bg-gray-200 rounded"></div>
    </div>
  );
}

export function MapSkeleton() {
  return (
    <div className="animate-pulse bg-gray-200 rounded-lg h-96 flex items-center justify-center">
      <MapIcon className="w-12 h-12 text-gray-400" />
    </div>
  );
}
```

### **Empty States**

```typescript
// ‚úÖ DO: Empty states espec√≠ficos e acion√°veis
export function EmptyMaterialsState() {
  return (
    <div className="text-center py-12">
      <div className="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4">
        <RecycleIcon className="w-12 h-12 text-gray-400" />
      </div>
      <h3 className="text-lg font-medium text-gray-900 mb-2">
        Nenhum material encontrado
      </h3>
      <p className="text-gray-500 mb-4">
        Que tal come√ßar adicionando seu primeiro material para reciclagem?
      </p>
      <Button>Adicionar Material</Button>
    </div>
  );
}
```

### **Toast Notifications**

```typescript
// ‚úÖ DO: Toast com Sonner
import { toast } from "sonner";

export function useNotifications() {
  const showSuccess = (message: string) => {
    toast.success(message);
  };
  
  const showError = (message: string, description?: string) => {
    toast.error(message, { description });
  };
  
  const showLoading = (message: string) => {
    return toast.loading(message);
  };
  
  return { showSuccess, showError, showLoading };
}
```

## **Padr√µes de Loading**

### **Estados de Carregamento por Contexto**

```typescript
// ‚úÖ DO: Loading states contextuais
export function MaterialList() {
  const { materials, isLoading, error } = useMaterialsStore();
  
  if (isLoading) {
    return <MaterialListSkeleton />;
  }
  
  if (error) {
    return <ErrorState message="Erro ao carregar materiais" onRetry={refetch} />;
  }
  
  if (materials.length === 0) {
    return <EmptyMaterialsState />;
  }
  
  return (
    <div className="space-y-4">
      {materials.map(material => (
        <MaterialCard key={material.id} material={material} />
      ))}
    </div>
  );
}
```

## **Landmarks e Acessibilidade** üèóÔ∏è

### **Estrutura Sem√¢ntica Obrigat√≥ria**

Aplicar landmarks HTML sem√¢nticos para melhorar navega√ß√£o e acessibilidade, seguindo WCAG 2.1 AA e heur√≠sticas de Nielsen.

#### **‚úÖ DO: Estrutura Sem√¢ntica Completa**

```typescript
// ‚úÖ DO: Estrutura de landmarks correta
export default function HomePage() {
  return (
    <div className="min-h-screen bg-background">
      {/* Skip Link para navega√ß√£o por teclado */}
      <a 
        href="#main-content" 
        className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 bg-green-600 text-white px-4 py-2 rounded-md font-medium transition-all"
      >
        Pular para o conte√∫do principal
      </a>
      
      {/* Header com navega√ß√£o */}
      <header className="sticky top-0 z-[9999] border-b bg-white/95 backdrop-blur-md shadow-sm">
        <nav className="container mx-auto px-4 py-4" aria-label="Navega√ß√£o principal">
          {/* Conte√∫do da navega√ß√£o */}
        </nav>
      </header>

      {/* Conte√∫do principal */}
      <main id="main-content" aria-label="Conte√∫do principal da p√°gina">
        {/* Se√ß√µes de conte√∫do */}
        <section aria-label="Apresenta√ß√£o do produto">
          {/* Hero section */}
        </section>
        
        <section aria-label="Como funciona - Processo de uso">
          {/* Processo */}
        </section>
        
        <aside aria-label="Mapa interativo sustent√°vel">
          {/* Conte√∫do complementar */}
        </aside>
      </main>

      {/* Rodap√© */}
      <footer className="bg-gray-900 py-16 text-white">
        {/* Links e informa√ß√µes */}
      </footer>
    </div>
  );
}
```

#### **‚ùå DON'T: Estrutura N√£o Sem√¢ntica**

```typescript
// ‚ùå DON'T: Usar divs gen√©ricas sem landmarks
export default function HomePage() {
  return (
    <div>
      <div className="header">
        <div className="nav">
          {/* Navega√ß√£o sem sem√¢ntica */}
        </div>
      </div>
      
      <div className="content">
        {/* Conte√∫do sem estrutura clara */}
      </div>
    </div>
  );
}
```

### **Elementos Sem√¢nticos Obrigat√≥rios**

#### **1. Skip Link**

```typescript
// ‚úÖ DO: Skip link para navega√ß√£o por teclado
<a 
  href="#main-content" 
  className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 bg-green-600 text-white px-4 py-2 rounded-md font-medium transition-all"
>
  Pular para o conte√∫do principal
</a>
```

#### **2. Header e Navega√ß√£o**

```typescript
// ‚úÖ DO: Header sem√¢ntico com navega√ß√£o
<header className="sticky top-0 z-[9999] border-b bg-white/95 backdrop-blur-md shadow-sm">
  <nav aria-label="Navega√ß√£o principal">
    {/* Links de navega√ß√£o */}
  </nav>
</header>
```

#### **3. Main Content**

```typescript
// ‚úÖ DO: Main com ID para skip link
<main id="main-content" aria-label="Conte√∫do principal da p√°gina">
  {/* Conte√∫do principal */}
</main>
```

#### **4. Se√ß√µes e Regi√µes**

```typescript
// ‚úÖ DO: Se√ß√µes com aria-labels descritivos
<section aria-label="Como funciona - Processo de uso da plataforma">
  <h2>Como funciona</h2>
  {/* Conte√∫do da se√ß√£o */}
</section>

<aside aria-label="Mapa interativo sustent√°vel">
  {/* Conte√∫do complementar */}
</aside>
```

#### **5. Footer**

```typescript
// ‚úÖ DO: Footer sem√¢ntico
<footer className="bg-gray-900 py-16 text-white">
  {/* Links e informa√ß√µes da empresa */}
</footer>
```

### **Z-Index e Camadas**

#### **‚úÖ DO: Hierarquia de Z-Index Clara**

```typescript
// ‚úÖ DO: Z-index organizados por camadas
const zIndexLayers = {
  skipLink: 'z-50',           // Skip link sempre vis√≠vel
  header: 'z-[9999]',         // Header sempre no topo
  modal: 'z-[1000]',          // Modais e overlays
  dropdown: 'z-[100]',        // Dropdowns e tooltips
  content: 'z-10',            // Conte√∫do normal
  background: 'z-0'           // Elementos de fundo
};

// Header com z-index alto
<header className={`sticky top-0 ${zIndexLayers.header} border-b bg-white/95 backdrop-blur-md shadow-sm`}>
```

#### **‚ùå DON'T: Z-Index Conflitantes**

```typescript
// ‚ùå DON'T: Z-index baixo que pode ser sobreposto
<header className="sticky top-0 z-10">
  {/* Pode ser sobreposto por outros elementos */}
</header>
```

### **Aria-Labels Descritivos**

#### **‚úÖ DO: Labels Espec√≠ficos e √öteis**

```typescript
// ‚úÖ DO: Aria-labels que descrevem o prop√≥sito
<nav aria-label="Navega√ß√£o principal">
<main aria-label="Conte√∫do principal da p√°gina">
<section aria-label="Como funciona - Processo de uso da plataforma">
<aside aria-label="Mapa interativo sustent√°vel">
<footer aria-label="Rodap√© - Links e informa√ß√µes da empresa">
```

#### **‚ùå DON'T: Labels Gen√©ricos ou Redundantes**

```typescript
// ‚ùå DON'T: Labels gen√©ricos
<nav aria-label="Menu">
<section aria-label="Se√ß√£o">
<aside aria-label="Sidebar">
```

### **Navega√ß√£o por Teclado**

#### **‚úÖ DO: Suporte Completo ao Teclado**

```typescript
// ‚úÖ DO: Skip link funcional
<a 
  href="#main-content" 
  className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 bg-green-600 text-white px-4 py-2 rounded-md font-medium transition-all"
>
  Pular para o conte√∫do principal
</a>

// ‚úÖ DO: Focus management
<button 
  className="focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleClick();
    }
  }}
>
  A√ß√£o
</button>
```

### **Conformidade WCAG 2.1 AA**

#### **Crit√©rios de Sucesso Implementados:**

- ‚úÖ **1.3.1 Info and Relationships**: Estrutura sem√¢ntica clara
- ‚úÖ **2.4.1 Bypass Blocks**: Skip link funcional
- ‚úÖ **2.4.6 Headings and Labels**: Headings hier√°rquicos
- ‚úÖ **4.1.2 Name, Role, Value**: Aria-labels apropriados

## **Refer√™ncias**

- [Nielsen's 10 Usability Heuristics](https://www.nngroup.com/articles/ten-usability-heuristics/)
- [WCAG 2.1 AA Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [HTML Landmarks](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/ARIA_Techniques#landmark_roles)
- [Sonner Documentation](https://sonner.emilkowal.ski/)
- [Shadcn UI Components](https://ui.shadcn.com/)
- [Loading States Best Practices](https://uxdesign.cc/loading-states-in-ux-design-5c8b0b4a8b8a)
